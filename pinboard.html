<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Pinboard</title>
<link rel="stylesheet" href="styles.css" />
</head>
<body>
<nav>
  <a href="index.html">About Me</a>
  <a href="pinboard.html">Pinboard</a>
</nav>

<h1>Pinboard</h1>

<label for="noteInput">Enter your name or note:</label>
<input type="text" id="noteInput" />
<button id="addNoteBtn">Add Note</button>

<div id="pinboardArea"></div>

<script>
let notes = JSON.parse(localStorage.getItem('notes')) || [];

const pinboardArea = document.getElementById('pinboardArea');
const addNoteBtn   = document.getElementById('addNoteBtn');
const noteInput    = document.getElementById('noteInput');

function saveNotes() {
  localStorage.setItem('notes', JSON.stringify(notes));
}

function createNoteElement(note) {
  const div = document.createElement('div');
  div.className = 'note';
  div.style.position = 'absolute';
  div.style.left = note.x + 'px';
  div.style.top  = note.y + 'px';
  div.draggable = true;
  div.dataset.id = note.id;  // store id on element

  // Text span
  const span = document.createElement('span');
  span.textContent = note.text;

  // Delete button
  const delBtn = document.createElement('button');
  delBtn.textContent = '×';          // X symbol
  delBtn.className = 'delete-note';
  delBtn.onclick = function (e) {
    e.stopPropagation();             // don’t start drag
    // Remove from DOM
    div.remove();
    // Remove from notes array + save
    notes = notes.filter(n => n.id !== note.id);
    saveNotes();
  };

  div.appendChild(span);
  div.appendChild(delBtn);

  div.addEventListener('dragstart', dragStart);
  div.addEventListener('dragend', dragEnd);

  pinboardArea.appendChild(div);
  return div;

}

let draggedNote = null;
let offsetX = 0;
let offsetY = 0;

function dragStart(e) {
  draggedNote = e.target;
  offsetX = e.offsetX;
  offsetY = e.offsetY;
}

function dragEnd(e) {
  if (!draggedNote) return;

  const rect = pinboardArea.getBoundingClientRect();
  const newX = e.pageX - rect.left - offsetX;
  const newY = e.pageY - rect.top  - offsetY;

  draggedNote.style.left = newX + 'px';
  draggedNote.style.top  = newY + 'px';

  const id = draggedNote.dataset.id;
  const idx = notes.findIndex(n => n.id === id);
  if (idx !== -1) {
    notes[idx].x = newX;
    notes[idx].y = newY;
    saveNotes();
  }

  draggedNote = null;
}

// Add new note
addNoteBtn.onclick = function () {
  const text = noteInput.value.trim();
  if (!text) {
    alert('Please enter a note or name.');
    return;
  }

  const newNote = {
    id: Date.now().toString(),  // unique id
    text: text,
    x: 50,
    y: 50
  };

  notes.push(newNote);
  saveNotes();
  createNoteElement(newNote);
  noteInput.value = '';
};

// Allow dropping inside pinboard
pinboardArea.addEventListener('dragover', function (e) {
  e.preventDefault();
});

// Render saved notes on load
window.onload = function () {
  notes.forEach(createNoteElement);
};
</script>


</body>
</html>
